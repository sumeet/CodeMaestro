cargo-features = ["default-run"]

[package]
name = "cs"
version = "0.1.0"
authors = ["Sumeet Agarwal <sumeet.a@gmail.com>"]
edition = "2018"
default-run = "cs"

[features]
default = ["glium", "glutin", "imgui", "imgui-sys", "imgui-glium-renderer", "pyo3", "slack",
           "tokio", "tokio-reactor", "irc", "irc-proto", "tokio-current-thread"]
javascript = ["yew", "stdweb"]

[dependencies]
objekt = "0.1.1"
debug-cell = "0.1.1"
serde = "1.0.79"
serde_derive = "1.0.79"
serde_json = "1.0.31"
erased-serde = "0.3.6"
failure = "0.1.2"
uuid = { version = "0.7.1", features = ["serde", "v4", "v5"] }
lazy_static = "1.1.0"
itertools = "0.7.8"
downcast-rs = "1.0.3"
futures = "0.1"
take_mut = "0.2.2"
http = "0.1"
# need this for the old / new futures compat layer in wasm as well as native
tokio-async-await = {version = "0.1.4", features = ["async-await-preview"]}

pyo3 = { version = "0.5.2", optional = true }
glium = { version = "0.22", default-features = true, optional = true }
glutin = { version = "0.18", optional = true }
imgui = { version = "0.0.21", optional = true }
imgui-sys = { version = "0.0.21", optional = true }
imgui-glium-renderer = { version = "0.0.21", optional = true }
tokio = {version = "0.1.13", features = ["async-await-preview"], optional = true }
tokio-reactor = {version = "0.1.7", optional = true }
tokio-current-thread = {version = "0.1.4", optional = true }
irc = {git = "https://github.com/aatxe/irc", branch = "0.14", optional = true }
irc-proto = {git = "https://github.com/aatxe/irc", branch = "0.14", optional = true }
stdweb = {version = "0.4.12", features = ["experimental_features_which_may_break_on_minor_version_bumps", "futures-support"], optional = true }
yew = { git = "https://github.com/DenisKolodin/yew", optional = true }
slack = { git = "https://github.com/sumeet/slack-rs", features = ["future"], branch = "master", optional = true }

[patch.crates-io]
futures-core-preview = { git = "https://github.com/cramertj/futures-rs", branch = "update-nightly" }
futures-sink-preview = { git = "https://github.com/cramertj/futures-rs", branch = "update-nightly" }
futures-util-preview = { git = "https://github.com/cramertj/futures-rs", branch = "update-nightly" }

